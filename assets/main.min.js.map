{"version":3,"sources":["main.js.liquid"],"names":["Site","mobileThreshold","init","_this","this","$","window","resize","onResize","Header","BlogImages","wrapResponsiveVideos","hasClass","Product","bindMailchimpInputStyle","length","handleLayout","fixWidows","each","string","html","replace","key","element","src","startsWith","wrap","addClass","on","focusin","console","log","siblings","attr","focusout","bindCollectionHover","bindMobileToggle","collection","hideTypes","showTypes","hideSpinBorder","$collectionNav","removeClass","toggleClass","minWidth","numberRelatedToPick","zoomMagnitude","zoomImgWidth","$container","$productHeader","$productGallery","loadedImages","$productImage","pickRelated","variantSelect","updatePrice","windowWidth","width","containerWidth","sizeImageHolder","getFixedHeaderDimensions","toggleFixed","bindZoom","imagesLoaded","css","height","destroyZoom","off","galleryHeight","outerHeight","galleryOffset","offset","top","headerHeight","windowScroll","scrollTop","pick","$imgElem","find","imgHeight","imgWidth","$zoomContainer","children","imgOffset","zoomImgUrl","zoomWidth","zoomLeft","left","zoom","target","url","onZoomIn","parent","onZoomOut","trigger","select","option","options","selectedIndex","price","dataset","comparePrice","compare","text","$images","$image","prop","spaceImage","bind","image","size","getRandomElement","items","Math","floor","random","jQuery","document","ready"],"mappings":"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","file":"main.min.js.liquid","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global jQuery, $, document, Site, Modernizr */\n\nSite = {\n  mobileThreshold: 601,\n  init: function() {\n    var _this = this;\n\n    $(window).resize(function(){\n      _this.onResize();\n    });\n\n    _this.Header.init();\n    _this.BlogImages.init();\n    _this.wrapResponsiveVideos();\n\n    if ($('body').hasClass('template-product')) {\n      _this.Product.init();\n    }\n\n    _this.bindMailchimpInputStyle();\n\n  },\n\n  onResize: function() {\n    var _this = this;\n\n    if ($('#product-gallery').length) {\n      _this.Product.handleLayout();\n    }\n  },\n\n  fixWidows: function() {\n    // utility class mainly for use on headines to avoid widows [single words on a new line]\n    $('.js-fix-widows').each(function(){\n      var string = $(this).html();\n      string = string.replace(/ ([^ ]*)$/,'&nbsp;$1');\n      $(this).html(string);\n    });\n  },\n\n  wrapResponsiveVideos: function() {\n    $('.article-content iframe').each( function(key, element) {\n      var src = element.src;\n\n      // Check if it's a vime or youtube embed\n      if(src.startsWith('https://player.vimeo.com/video/') || src.startsWith('https://www.youtube.com/embed/')) {\n        $(this).wrap('<div class=\"u-video-embed-container\"></div>');\n      }\n\n      $(element).addClass('show');\n    });\n  },\n\n  bindMailchimpInputStyle: function() {\n    // shrink Mailchimp input zigzag stroke on focus\n    $(\".expand input\").on({\n      focusin: function() {\n        console.log('focus');\n        $(this).siblings(\"svg\").attr(\"class\", \"small-stroke\");\n      },\n      focusout: function() {\n        $(this).siblings(\"svg\").attr(\"class\", \"\");\n      }\n    });\n  },\n};\n\nSite.Header = {\n  init: function() {\n    var _this = this;\n\n    _this.bindCollectionHover();\n\n    _this.bindMobileToggle();\n  },\n\n  bindCollectionHover: function() {\n    var _this = this;\n\n    $('#header .nav-collection').on('mouseenter', function() {\n      var collection = $(this).attr('data-collection');\n\n      _this.hideTypes();\n      _this.showTypes(collection);\n    });\n\n    $('#main-nav').on('mouseleave', function() {\n\n      _this.hideTypes();\n      _this.hideSpinBorder();\n    });\n\n    $('.nav-item').on('mouseenter', function() {\n      var navItem = $(this).attr('data-nav-item');\n\n      _this.hideTypes();\n    });\n\n    $('#header .nav-item-holder').on('mouseenter', function() {\n      _this.hideSpinBorder();\n\n      $(this).addClass('spin');\n    });\n\n    $('#header .nav-item-holder').on('mouseleave', function() {\n      if (!$('.nav-types.show').length) {\n        _this.hideSpinBorder();\n      }\n    });\n  },\n\n  showTypes: function(collection) {\n    $('.nav-collection[data-collection=\"' + collection + '\"]').addClass('active');\n    var $collectionNav = $('.nav-types[data-collection=\"' + collection + '\"]');\n\n    if($collectionNav.length > 0) {\n      $collectionNav.addClass('show');\n      $('#main-nav').addClass('show-collection');\n    }\n  },\n\n  hideTypes: function(collection) {\n    $('#main-nav').removeClass('show-collection');\n    $('.nav-collection.active').addClass('active');\n    $('.nav-types.show').removeClass('show');\n  },\n\n  bindMobileToggle: function() {\n    $('.js-menu-toggle').on('click', function() {\n      $('#mobile-nav').toggleClass('show');\n    });\n  },\n\n  hideSpinBorder: function() {\n    $('.nav-item-holder').removeClass('spin');\n  }\n};\n\nSite.Product = {\n  minWidth: 720, // minWidth for fixed header layout\n  numberRelatedToPick: 4, // number of related products to show\n  zoomMagnitude: 1.5, // how much are we zooming?\n  zoomImgWidth: 555,\n  init: function() {\n    var _this = this;\n\n    _this.$container = $('#product-container'); // used by toggleFixed() on scroll\n\n    _this.$productHeader = $('#product-header');\n    _this.$productGallery = $('#product-gallery');\n\n    // imagesLoaded hasn't finished yet\n    _this.loadedImages = false;\n\n    if (_this.$productGallery.length) {\n      // We have product images, so we do the fancy layout\n      _this.handleLayout();\n\n      _this.$productImage = $('.product-gallery-image');\n    }\n\n    if ($('#related-products').length) {\n      // Pick a few Related Products to display\n      _this.pickRelated();\n    }\n\n    var variantSelect = $('#product-select');\n\n    if (variantSelect.length) {\n      _this.updatePrice(variantSelect[0]);\n\n      variantSelect.on('change', function() {\n        _this.updatePrice(variantSelect[0]);\n      });\n    }\n  },\n\n  handleLayout: function() {\n    var _this = this;\n\n    _this.windowWidth = $(window).width();\n\n    if (_this.windowWidth >= _this.minWidth) {\n      // window is wider than minimum width (720px) for fixed header layout\n\n      _this.containerWidth = _this.$container.width();\n\n      if (!_this.loadedImages) {\n        // bind imagesLoaded\n        _this.$productGallery.imagesLoaded( function() {\n          // images are loaded\n          _this.loadedImages = true;\n\n          // remove min-height for product gallery holder\n          _this.$productGallery.removeClass('min-height');\n          // size image holder to fit image size\n          _this.sizeImageHolder();\n          // get dimensions for toggleFixed()\n          _this.getFixedHeaderDimensions();\n          // toggle fixed header\n          _this.toggleFixed();\n          // init product image zooming\n          _this.bindZoom();\n\n          // show product header if still hidden\n          if (!_this.$productHeader.hasClass('show')) {\n            _this.$productHeader.addClass('show');\n          }\n        });\n      } else {\n        // on window resize\n        // if images are already loaded\n        // do the layout again\n        _this.sizeImageHolder();\n        _this.getFixedHeaderDimensions();\n        _this.toggleFixed();\n        _this.bindZoom();\n      }\n\n      $(window).on('scroll', function() {\n        // toggle fixed header on scroll\n        _this.toggleFixed();\n      });\n\n    } else {\n      // viewport is mobile width\n\n      // remove min-height for product gallery holder\n      _this.$productGallery.removeClass('min-height');\n      // remove fixed product header margin\n      _this.$productHeader.css('margin-right', 0);\n      // reset image holder dimensions\n      $('.product-gallery-image-holder').width('auto').height('auto');\n      // unbind zooming\n      _this.destroyZoom();\n      // unbind toggleFixed() on scroll\n      $(window).off('scroll');\n    }\n  },\n\n  getFixedHeaderDimensions: function() {\n    var _this = this;\n\n    // get gallery and header dimensions for\n    // toggling / positioning fixed header\n\n    _this.galleryHeight = _this.$productGallery.outerHeight(true);\n    _this.galleryOffset = _this.$productGallery.offset().top;\n    _this.headerHeight = _this.$productHeader.outerHeight(true);\n  },\n\n  toggleFixed: function() {\n    var _this = this;\n\n    var windowScroll = $(window).scrollTop();\n\n    if ((windowScroll + _this.galleryOffset + _this.headerHeight) <= (_this.galleryHeight + _this.galleryOffset)) {\n      // fixed header isn't at the bottom of the product gallery holder yet\n\n      // keep header fixed\n      _this.$productHeader.removeClass('bottom');\n      // position fixed header\n      _this.$productHeader.css('margin-right', ((_this.windowWidth - _this.containerWidth) / 2) + 'px');\n    } else {\n      // fixed header is at the bottom of the product gallery\n\n      // position header absolute\n      _this.$productHeader.addClass('bottom');\n      // reset fixed header positioning\n      _this.$productHeader.css('margin-right', 0);\n    }\n  },\n\n  pickRelated: function() {\n    var _this = this;\n\n    // show some related product items\n    $('.related-products-item').pick(_this.numberRelatedToPick);\n    // show related products container\n    $('#related-products').removeClass('u-hidden');\n  },\n\n  sizeImageHolder: function() {\n    // size each image holder to fit image\n\n    $('.product-gallery-image-holder').each(function() {\n      // clear holder height and width\n      $(this).height('auto').width('auto');\n\n      // get image dimensions\n      var $imgElem = $(this).find('.product-gallery-image'),\n        imgHeight = $imgElem.height(),\n        imgWidth = $imgElem.width();\n\n      // apply image dimensions to holder\n      $(this).height(imgHeight).width(imgWidth);\n    });\n  },\n\n  bindZoom: function() {\n    var _this = this;\n\n    $('.product-gallery-image-holder').each(function(){\n      // Each image in gallery\n\n      // each image holder has a zoom container element\n      var $zoomContainer = $(this).children('.zoom-container');\n\n      var imgWidth = $(this).width();\n      var imgOffset = $(this).offset();\n\n      var zoomImgUrl = $(this).attr('data-zoom');\n\n      // zoom container positioning magic DO NOT fuck with (*blessings*)\n      var zoomWidth = _this.zoomImgWidth;\n      var zoomLeft = (imgOffset.left - ((zoomWidth - imgWidth) / 2));\n\n      // Center zoom container on image\n      $zoomContainer.css({\n        'width': zoomWidth + 'px',\n        'left': zoomLeft + 'px',\n      });\n\n      // Bind zooming\n      $(this).zoom({\n        target: $zoomContainer,\n        on: 'click',\n        url: zoomImgUrl,\n        onZoomIn: function() {\n          $(this).parent('.zoom-container').addClass('show');\n          _this.$productImage.addClass('hide');\n        },\n        onZoomOut: function() {\n          $(this).parent('.zoom-container').removeClass('show');\n          _this.$productImage.removeClass('hide');\n        },\n      });\n\n    });\n  },\n\n  destroyZoom: function() {\n    // unbind zooming\n    $('.product-gallery-image-holder').trigger('zoom.destroy');\n  },\n\n  updatePrice: function(select) {\n    var option = select.options[select.selectedIndex];\n    var price = option.dataset.price;\n    var comparePrice = option.dataset.compare;\n\n    $('#variant-price').text(price);\n    $('#variant-compare').text(comparePrice);\n  }\n}\n\nSite.BlogImages = {\n  init: function() {\n    var _this = this;\n\n    _this.$images = $('.lookbook-image');\n\n    // Check if in single\n    if(_this.$images.length) {\n\n      _this.$images.each(function() {\n        var $image = $(this);\n\n        // Check if image is already loaded\n        if ($image.prop('complete')) {\n          _this.spaceImage(this);\n        } else {\n          // Bind load image\n          $image.bind('load', function() {\n            _this.spaceImage(this);\n          });\n        }\n      });\n    }\n  },\n\n  spaceImage: function(image) {\n    var _this = this;\n\n    var $image = $(image);\n\n    // Check image aspect ratio\n    if (image.width > image.height) { // Landspcape\n\n      // Get random size\n      var size = _this.getRandomElement(['basic','mid','large']);\n\n      // Add spacing\n      $image.addClass('padding-left-' + size);\n\n      // Remove item-m-6 so it takes its own full-width lane\n      $(image).parent().removeClass('item-m-6');\n\n    } else { // Portrait\n\n      // Get random size (or false)\n      var size = _this.getRandomElement([false,'basic','mid','large']);\n\n      if(size) {\n        // Add spacing\n        $image.addClass('padding-top-' + size);\n      }\n\n    }\n\n    $image.addClass('show-image');\n  },\n\n  getRandomElement: function(items) {\n    return items[Math.floor(Math.random() * items.length)];\n  },\n}\n\njQuery(document).ready(function () {\n  'use strict';\n\n  Site.init();\n\n});\n"]}