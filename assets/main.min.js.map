{"version":3,"sources":["main.js.liquid"],"names":["Site","mobileThreshold","init","_this","this","$","window","resize","onResize","Header","hasClass","Product","length","handleLayout","fixWidows","each","string","html","replace","bindCollectionHover","bindMobileToggle","on","collection","attr","hideTypes","showTypes","addClass","removeClass","toggleClass","minWidth","$productHeader","$productGallery","$zoomContainer","loadedImages","pickRelated","$container","windowWidth","width","sizeImageHolder","getFixedHeaderDimensions","toggleFixed","bindZoom","imagesLoaded","height","destroyZoom","off","galleryHeight","outerHeight","galleryOffset","offset","top","headerHeight","windowScroll","scrollTop","containerWidth","css","pick","$imgElem","find","imgHeight","imgWidth","children","imgOffset","zoomMagnitude","zoomWidth","zoomLeft","left","zoom","target","onZoomIn","parent","onZoomOut","magnify","trigger","jQuery","document","ready"],"mappings":"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","file":"main.min.js.liquid","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global jQuery, $, document, Site, Modernizr */\n\nSite = {\n  mobileThreshold: 601,\n  init: function() {\n    var _this = this;\n\n    $(window).resize(function(){\n      _this.onResize();\n    });\n\n    _this.Header.init();\n\n    if ($('body').hasClass('template-product')) {\n      _this.Product.init();\n    }\n\n  },\n\n  onResize: function() {\n    var _this = this;\n\n    if ($('#product-gallery').length) {\n      _this.Product.handleLayout();\n    }\n  },\n\n  fixWidows: function() {\n    // utility class mainly for use on headines to avoid widows [single words on a new line]\n    $('.js-fix-widows').each(function(){\n      var string = $(this).html();\n      string = string.replace(/ ([^ ]*)$/,'&nbsp;$1');\n      $(this).html(string);\n    });\n  },\n\n\n};\n\nSite.Header = {\n  init: function() {\n    var _this = this;\n\n    _this.bindCollectionHover();\n\n    _this.bindMobileToggle();\n  },\n\n  bindCollectionHover: function() {\n    var _this = this;\n\n    $('.nav-collection').on('mouseenter', function() {\n      var collection = $(this).attr('data-collection');\n\n      _this.hideTypes();\n      _this.showTypes(collection);\n    });\n\n    $('#main-nav').on('mouseleave', function() {\n\n      _this.hideTypes();\n    });\n  },\n\n  showTypes: function(collection) {\n    $('.nav-collection[data-collection=\"' + collection + '\"]').addClass('active');\n    $('.nav-types[data-collection=\"' + collection + '\"]').addClass('show');\n  },\n\n  hideTypes: function(collection) {\n    $('.nav-collection.active').addClass('active');\n    $('.nav-types.show').removeClass('show');\n  },\n\n  bindMobileToggle: function() {\n    $('.js-menu-toggle').on('click', function() {\n      $('#mobile-nav').toggleClass('show');\n    });\n  },\n};\n\nSite.Product = {\n  minWidth: 720,\n  init: function() {\n    var _this = this;\n\n    _this.$productHeader = $('#product-header');\n    _this.$productGallery = $('#product-gallery');\n\n    _this.$zoomContainer = $('#zoom-container');\n\n    _this.loadedImages = false;\n\n    if (_this.$productGallery.length) {\n      _this.handleLayout();\n    }\n\n    if ($('#related-products').length) {\n      _this.pickRelated();\n    }\n  },\n\n  handleLayout: function() {\n    var _this = this;\n\n    _this.$container = $('.container');\n\n    _this.windowWidth = $(window).width();\n\n    if (_this.windowWidth >= _this.minWidth) {\n\n      if (!_this.loadedImages) {\n        _this.$productGallery.imagesLoaded( function() {\n          _this.$productGallery.removeClass('min-height');\n          _this.sizeImageHolder();\n          _this.getFixedHeaderDimensions();\n          _this.toggleFixed();\n          _this.bindZoom();\n          _this.loadedImages = true;\n        });\n      } else {\n        _this.sizeImageHolder();\n        _this.getFixedHeaderDimensions();\n        _this.toggleFixed();\n        _this.bindZoom();\n      }\n\n      $(window).on('scroll', function() {\n        _this.toggleFixed();\n      });\n\n    } else {\n\n      _this.$productGallery.removeClass('min-height');\n      $('.product-gallery-image-holder').width('auto').height('auto');\n      _this.getFixedHeaderDimensions();\n      _this.toggleFixed();\n      _this.destroyZoom();\n\n      $(window).off('scroll');\n\n    }\n  },\n\n  getFixedHeaderDimensions: function() {\n    var _this = this;\n\n    _this.galleryHeight = _this.$productGallery.outerHeight(true);\n    _this.galleryOffset = _this.$productGallery.offset().top;\n    _this.headerHeight = _this.$productHeader.outerHeight(true);\n  },\n\n  toggleFixed: function() {\n    var _this = this;\n\n    var windowScroll = $(window).scrollTop();\n\n    var containerWidth = _this.$container.width();\n\n    if ((windowScroll + _this.galleryOffset + _this.headerHeight) <= (_this.galleryHeight + _this.galleryOffset)) {\n      _this.$productHeader.removeClass('bottom');\n      _this.$productHeader.css('margin-right', ((_this.windowWidth - containerWidth) / 2) + 'px');\n    } else {\n      _this.$productHeader.addClass('bottom');\n      _this.$productHeader.css('margin-right', 0);\n    }\n  },\n\n  pickRelated: function() {\n    $('.related-products-item').pick(4);\n\n    $('#related-products').removeClass('u-hidden');\n  },\n\n  sizeImageHolder: function() {\n    $('.product-gallery-image-holder').each(function() {\n      $(this).height('auto').width('auto');\n\n      var $imgElem = $(this).find('.product-gallery-image');\n        imgHeight = $imgElem.height(),\n        imgWidth = $imgElem.width();\n\n      $(this).height(imgHeight).width(imgWidth);\n    });\n  },\n\n  bindZoom: function() {\n    var _this = this;\n\n    $('.product-gallery-image-holder').each(function(){\n      // Each image in gallery\n\n      var $zoomContainer = $(this).children('.zoom-container');\n\n      var imgWidth = $(this).width();\n      var imgOffset = $(this).offset();\n\n      var zoomMagnitude = 1.5;\n\n      var zoomWidth = imgWidth * (zoomMagnitude * 2);\n      var zoomLeft = (imgOffset.left - ((zoomWidth - imgWidth) / 2));\n\n      // Center zoom container on image\n      $zoomContainer.css({\n        'width': zoomWidth + 'px',\n        'left': zoomLeft + 'px',\n      });\n\n      // Zoom\n      $(this).zoom({\n        target: $zoomContainer,\n        on: 'grab',\n        onZoomIn: function() {\n          $(this).parent('.zoom-container').addClass('show');\n        },\n        onZoomOut: function() {\n          $(this).parent('.zoom-container').removeClass('show');\n        },\n        magnify: zoomMagnitude,\n      });\n\n    });\n  },\n\n  destroyZoom: function() {\n    $('.product-gallery-image-holder').trigger('zoom.destroy');\n  },\n}\n\njQuery(document).ready(function () {\n  'use strict';\n\n  Site.init();\n\n});\n"]}